<html>
<head>
  <title>The effects of social transmission biases on human cultural evolution</title>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">
  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/bootstrap.css">
</head>
<!--<script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>-->
<script src="../js/jquery.min.js"></script>

<script src="../survey/surveyjs/survey.jquery.js"></script>
<script src="../survey/loadSurvey.js"></script>


<script src="../js/utils.js"></script>
<script src="../js/stages.js"></script>
<script src="../js/qualifying.js"></script>
<script src="../js/playStories.js"></script>
<script src="../js/distraction.js"></script>
<script src="../js/instructions.js"></script>
<script src="../js/techTest.js"></script>
<script src="../js/speechEvaluation.js"></script>
<script src="../DistractionTask/distractionTask3.js"></script>


<script src="../Recordmp3js-master/recordmp3.js"></script>
<script src="../Recordmp3js-master/controlRecordings.js"></script>
<script src="../Recordmp3js-master/resampler.js"></script>

<!--<script src="https://unpkg.com/browser-id3-writer@4.0.0" crossorigin="anonymous" integrity="sha384-cEi0gGIqBwYacENeo/qnaVo6RWaRR1aj4LVEXITfS+tw2oJomW5Wr3HGQyRXBKlH"></script> -->

<div id="progressBarContainer">
</div>

<div class="container">
   <div id="instructions"></div>
   <div class="loader" id="loader"></div>

   
   <div id="playStoryContainer">
       <audio id="playStoryPlayer" onended="playStoryPlayerEnded()">
          <source id="playStorySource" src="" type="audio/mpeg">
       </audio> 
       <button type="button" id="playStoryButton" onclick="playStoryButtonPress()" class="btn btn-success">Listen</button>
       <div id="storyProgress">
          <div id="timeline">
            <div id="playhead"></div>
          </div>
        </div>
   </div>

   <div id="playEvalContainer">
       <audio id="playEvalPlayer" onended="playEvalEnded()">
          <source id="playEvalSource" src="" type="audio/mpeg">
       </audio>
       <button type="button" id="playEvalButton" onclick="playEvalButtonPress()" class="btn btn-success">Listen</button>        
   </div>

   <div id="surveyContainer"></div>

   <div id="recorderContainer">
     <button id="startRecordingButton" onclick="startRecording(this);" class="btn btn-success active">Start Recording</button>
     <button id="stopRecordingButton" onclick="stopRecording(this);" class="btn btn-danger disabled" disabled>Stop Recording</button>
     <img id="recordingLight" src="../resources/images/RecordingLight_off.png">
     <br /><br />
     <div id="multipleRecordingsDiv">
      <button id="finishedStory" onclick="finishedMultipleRecording(this);" class="btn btn-success active">I have finished telling the story</button>
     </div>
  </div>
    <div id="testRecorder" style="display:none">
        <audio id="testRecorderAudio" onplay="testRecorderAudioStarted()" controls></audio><br /><br />
            <button id="micWorkedButton" onclick="nextStage()" class="btn btn-success">Yes, my microphone worked!</button><br /><br />
            <button onclick="micTestFail()" class="btn btn-danger">No, there was a problem, let me try again</button>
     </div>

   <div id="SpeakerTest">
    <audio id="TestAudio" onplay="speakerTestStarted()" controls controlsList="nodownload">
      <source src="../resources/audio/SpeakerTestAudio.mp3" type="audio/mpeg">
    </audio><br /><br />
    <button id="finishedTestAudioButton" onclick="finishedTestAudio();" class="btn btn-success">Yes, my audio is working!</button><br />
   </div>

   <div id="techTest">
   	<div id="techTestInstructions"></div>
   	<button id="shareMediaButton" onclick="userAgreedToShareMicrophone()" class='btn btn-success'>Yes, share my microphone</button>
   </div>


  <div id="distractionTaskContainer" style="display:none">
    <div id="points"></div>
    <div id="displayGrid"></div>
    <div id="selectGrid"></div>
    <div id="DragArrow">
      <image id="DragArrowImg" src="../DistractionTask/images/DragArrow.png" style="width:100%">
    </div>
    <div id="trash" ondrop="drop(event)" ondragover="preventDefault(event)">
      <image id="trashimg" ondrop="drop(event)" ondragover="preventDefault(event)" src="../DistractionTask/images/bin.png" style="width:100%">
    </div>
    <div id="timer">
      <progress id="timerProgress" value="0" max="100"></progress>
    </div>
    <br />
    <div id="DistractionTaskVideoDiv">
    <video id="DistractionTaskVideo" onended="DistractionTaskVideoEnded()" poster="../resources/images/DistractionTaskInstructionsBackup.png">
      <source id="DistractionTaskVideoSource" src="../resources/video/InstructionVideo2.mp4" type="video/mp4">
      <img src="../resources/images/DistractionTaskInstructionsBackup.png">
    </video> 
    </div>
  </div>

</div>



<div class="container">
  <div id="testDiv" style="display:none">
    TEST SETTINGS
    <br />
  Stages:<br />
  <textarea id="stagesText" cols="200" rows="3"></textarea>
  <br />
  Asynchronous Audio Conversion/Uploading? <input type="checkbox" id="asynchronousCheck" checked><br />
  mp3 format? (vs wav) <input type="checkbox" id="mp3Check" checked><br />
  Sample rate (-1 for no resampling) <input type="text" id="sampleRate" value="32000"><br />
  <br /><br />
  DISTRACTION TASK
  <br />
  NumSymbolsObserved  = <input id="NumSymbolsObserved" value="5" /><br />
    NumberOfRounds = <input id="NumberOfRounds" value="3" /><br />

    selectGridColumns <input id="selectGridColumns" value="3" /><br />
    displayGridColumns <input id="displayGridColumns" value="4" /><br />
    displayGridRows <input id="displayGridRows" value="4" /><br />

    distractionTaskInstructionTime <input id="distractionTaskInstructionTime" value="115000" /><br />
    distractionTaskDisplayTime (ms) <input id="distractionTaskDisplayTime" value="30000" /><br />
    distractionTaskSelectTime (ms) <input id="distractionTaskSelectTime" value="20000" /><br />
    distractionTaskFeedbackTime (ms) <input id="distractionTaskFeedbackTime" value="2000" /><br />

    

  <br /><br />
  <button onclick="startTestRun()">START</button><br />
  </div>
</div>

<!--Fallback if there is an error-->
<div id="HelpButton" style="position:fixed;top:93%;left:90%;width:9%;height:6%;background:#810101;box-shadow: 5px 5px 2px #888888;text-align: center;color: white;" onclick="document.getElementById('HelpText').style.display='inline'">
  Help
</div>
<div id="HelpText" style="display:none; position:absolute; top:50%;left:50%;height:45%;width:45%;background:#810101;font-size:20px;z-index:100;box-shadow: 5px 5px 2px #888888;color: white;padding:10px">
  If you are experiencing an error or cannot complete the experiment for technical reasons, Please contact the researchers to make them aware of the problem and ensure you receive payment. Include your Mechanical Turk Worker ID or your Prolific ID.
  <br />
  Contact: Richard E.W. Berl at rewberl@colostate.edu (Mechanical Turk) or Alarna Samarasinghe (through the Prolific website).
  <br /><br />
  <button onclick="document.getElementById('HelpText').style.display='none'" style="background:black;border:black">Click here to close this message</button>
</div>

</html>

