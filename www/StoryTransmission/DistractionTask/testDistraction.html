<html>
<head>
  <link rel="stylesheet" type="text/css" href="../css/style.css">
  <link rel="stylesheet" href="../css/bootstrap.css">
</head>
<script src="../js/instructions.js"></script>
<script src="../Recordmp3js-master/js/jquery-1.11.0.min.js"></script>
<script src="../DistractionTask/distractionTask3.js"></script>
<script src="../survey/surveyjs/survey.jquery.js"></script>
<script src="../survey/loadSurvey.js"></script>
<script src="../js/utils.js"></script>

<script>

browser = "Firefox";

participantID="Test_" + new Date().getTime(); 

function nextStage(){
	//alert("End of distraction test\nYou scored "+playerPoints+ " points!");
	document.getElementById("gameOverMessage").innerHTML = "<h1>Game over!</h1><p>You scored <strong>" + playerPoints + "</strong> points!";
	showMe("gameOver");
	showMe("settings");
	hideMe('DragArrow');
	
	document.getElementById("output").innerHTML = tmpOutputText;
	document.getElementById("displayGrid").style.display = 'none';
	document.getElementById("selectGrid").style.display = 'none';
	}

function startTestDistractionTask(){
	NumSymbolsObserved = parseInt(document.getElementById("NumSymbolsObserved").value);
	NumberOfRounds = parseInt(document.getElementById("NumberOfRounds").value);
	selectGridColumns = parseInt(document.getElementById("selectGridColumns").value);
	displayGridColumns = parseInt(document.getElementById("displayGridColumns").value);
	displayGridRows = parseInt(document.getElementById("displayGridRows").value);
	distractionTaskInstructionTime = parseInt(document.getElementById("distractionTaskInstructionTime").value);
	distractionTaskDisplayTime = parseInt(document.getElementById("distractionTaskDisplayTime").value);
	distractionTaskSelectTime = parseInt(document.getElementById("distractionTaskSelectTime").value);
	distractionTaskFeedbackTime= parseInt(document.getElementById("distractionTaskFeedbackTime").value);

	selectStimOrder = [];

	preloadGridImages();

	playerPoints = 0;
	if(selectStimOrder.length ==0){
		for(var i=0; i<numStimuli;++i){
			selectStimOrder.push(i);
		}
		// randomise once, so it remains the same throughout the experiment
		shuffle(selectStimOrder);
	}
	hideMe("settings");
	hideMe("trash");
	document.getElementById("displayGrid").style.display = 'grid'
	startDistractionTask(0);

}

function gameOverClick(){
	hideMe("gameOver");
}


function addToFileLog(){

}


</script>

<body onload ='hideMe("displayGrid")'>


<div id="gameOver" style="position:absolute; width: 100%; height: 100%; z-index:2; background:#00bf07">
	<div class="container">
		<div id="gameOverMessage"></div>
	</div>
	<button onclick="hideMe('gameOver')" style="position:absolute;top:70%; left: 10%">Next Player</button>
</div>


<div class="container">
<div id="settings" style="z-index:2"> 

	NumSymbolsObserved  = <input id="NumSymbolsObserved" value="5" /><br />
	NumberOfRounds = <input id="NumberOfRounds" value="3" /><br />

	selectGridColumns <input id="selectGridColumns" value="3" /><br />
	displayGridColumns <input id="displayGridColumns" value="4" /><br />
	displayGridRows <input id="displayGridRows" value="4" /><br />

	distractionTaskInstructionTime <input id="distractionTaskInstructionTime" value="2000" /><br />
	distractionTaskDisplayTime (ms) <input id="distractionTaskDisplayTime" value="10000" /><br />
	distractionTaskSelectTime (ms) <input id="distractionTaskSelectTime" value="10000" /><br />
	distractionTaskFeedbackTime (ms) <input id="distractionTaskFeedbackTime" value="2000" /><br />
	<button onclick="startTestDistractionTask()">Start distraction task</button>
	<br />
	<div id="output"></div>
</div>

<div id="instructions"></div>


	<div id="distractionTaskContainer">
	  <div id="points"></div>
	  <div id="displayGrid"></div>
	  <div id="selectGrid"></div>
	  <div id="DragArrow">
	  <image id="DragArrowImg" src="../DistractionTask/images/DragArrow.png" style="width:100%">
	  </div>
	  <div id="trash" ondrop="drop(event)" ondragover="preventDefault(event)">
	    <image id="trashimg" ondrop="drop(event)" ondragover="preventDefault(event)" src="../DistractionTask/images/bin.png" style="width:100%">
	  </div>
	  <div id="timer">
	    <progress id="timerProgress" value="0" max="100"></progress>
	  </div>
	  <div id="DistractionTaskVideoDiv">
    <video id="DistractionTaskVideo" onended="DistractionTaskVideoEnded()" poster="../resources/images/DistractionTaskInstructionsBackup.png">
      <source id="DistractionTaskVideoSource" src="../resources/video/InstructionVideo2.mp4" type="video/mp4">
      <img src="../resources/images/DistractionTaskInstructionsBackup.png">
    </video> 
    </div>
	</div>
</div>


</body>

</html>