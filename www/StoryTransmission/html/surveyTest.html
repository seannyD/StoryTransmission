<html>
<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/bootstrap.css">
</head>
<!--<script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>-->
<script src="../js/jquery.min.js"></script>

<script src="../survey/surveyjs/survey.jquery.js"></script>
<script src="../survey/loadSurvey.js"></script>


<script src="../js/utils.js"></script>
<script src="../js/stages.js"></script>
<script src="../js/playStories.js"></script>
<script src="../js/distraction.js"></script>
<script src="../js/instructions.js"></script>
<script src="../js/techTest.js"></script>
<script src="../js/speechEvaluation.js"></script>
<script src="../DistractionTask/distractionTask2.js"></script>



<script src="../Recordmp3js-master/recordmp3.js"></script>
<script src="../Recordmp3js-master/controlRecordings.js"></script>
<script src="../Recordmp3js-master/resampler.js"></script>

<div id="progressBarContainer">
</div>

<div class="container">
   <div id="instructions"></div>
   <div class="loader" id="loader"></div>

   <div id="surveyContainer"></div>

   <div id="playStoryContainer">
       <audio id="playStoryPlayer" onended="playStoryPlayerEnded()">
          <source id="playStorySource" src="" type="audio/mpeg">
       </audio> 
       <button type="button" id="playStoryButton" onclick="playStoryButtonPress()" class="btn btn-success">Listen</button>
       <div id="storyProgress">
          <div id="timeline">
            <div id="playhead"></div>
          </div>
        </div>
   </div>

   <div id="recorderContainer">
     <button id="startRecordingButton" onclick="startRecording(this);" class="btn btn-success active">Start Recording</button>
     <button id="stopRecordingButton" onclick="stopRecording(this);" class="btn btn-danger disabled" disabled>Stop Recording</button>
     <br /><br />
     <div id="multipleRecordingsDiv">
      <button id="finishedStory" onclick="finishedMultipleRecording(this);" class="btn btn-success active">I have finished telling my story</button>
     </div>
  </div>
    <div id="testRecorder" style="display:none">
        <audio id="testRecorderAudio" onplay="testRecorderAudioStarted()" controls></audio><br /><br />
            <button id="micWorkedButton" onclick="nextStage()" class="btn btn-success">Yes, my microphone worked!</button><br /><br />
            <button onclick="micTestFail()" class="btn btn-danger">No, there was a problem, let me try again</button>
     </div>

   <div id="SpeakerTest">
    <audio id="TestAudio" onplay="speakerTestStarted()" controls>
      <source src="../resources/audio/SpeakerTestAudio.mp3" type="audio/mpeg">
    </audio><br /><br />
    <button id="finishedTestAudioButton" onclick="finishedTestAudio()" class="btn btn-success">Yes, my audio is working!</button><br />
   </div>

   <div id="techTest">
   	<div id="techTestInstructions"></div>
   	<button id="shareMediaButton" onclick="userAgreedToShareMicrophone()" class='btn btn-success'>Yes, share my microphone</button>
   </div>


  <div id="distractionTaskContainer" style="display:none">
    <div id="points"></div>
    <div id="displayGrid"></div>
    <div id="selectGrid"></div>
<!--    <div id="trash" ondrop="drop(event)" ondragover="preventDefault(event)">
      <image id="trashimg" ondrop="drop(event)" ondragover="preventDefault(event)" src="../DistractionTask/images/bin.png" style="width:100%">
    </div>  -->
    <div id="timer">
      <progress id="timerProgress" value="0" max="100"></progress>
    </div>
  </div>

</div>



<div class="container">
  <div id="testDiv" style="display:none">
    TEST SETTINGS
    <br />
  Stages:<br />
  <textarea id="stagesText" cols="200" rows="3"></textarea>
  <br />
  Asynchronous Audio Conversion/Uploading? <input type="checkbox" id="asynchronousCheck" checked><br />
  mp3 format? (vs wav) <input type="checkbox" id="mp3Check" checked><br />
  Sample rate (-1 for no resampling) <input type="text" id="sampleRate" value="32000"><br />
  <br /><br />
  DISTRACTION TASK
  <br />
  NumSymbolsObserved  = <input id="NumSymbolsObserved" value="7" /><br />
    NumberOfRounds = <input id="NumberOfRounds" value="3" /><br />

    selectGridColumns <input id="selectGridColumns" value="3" /><br />
    displayGridColumns <input id="displayGridColumns" value="6" /><br />
    displayGridRows <input id="displayGridRows" value="4" /><br />

    distractionTaskInstructionTime <input id="distractionTaskInstructionTime" value="5000" /><br />
    distractionTaskDisplayTime (ms) <input id="distractionTaskDisplayTime" value="30000" /><br />
    distractionTaskSelectTime (ms) <input id="distractionTaskSelectTime" value="30000" /><br />
    distractionTaskFeedbackTime (ms) <input id="distractionTaskFeedbackTime" value="2000" /><br />
  <br /><br />
  <button onclick="startTestRun()">START</button><br />
  </div>
</div>

</html>

